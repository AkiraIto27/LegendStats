# LOL Stats Hub - プロジェクト計画

## 1. プロジェクト概要

OP.GGの機能を拡張した、League of Legends向けの高度な統計・分析プラットフォームを開発する。

## 2. データ取得方法

### Riot Games API

- **APIキー取得**:
  - 開発者ポータルでRiotアカウントを使用してAPIキーを取得
  - 初期は24時間有効の開発者用APIキー
  - 長期運用にはプロダクションキー申請が必要

- **主要なAPIエンドポイント**:
  - Summoner-V4: プレイヤーの基本プロフィール
  - Match-V5: マッチ履歴と詳細データ
  - League-V4/League-Exp-V4: ランク情報とランキング
  - Champion-Mastery-V4: チャンピオン習熟度
  - Spectator-V5: 現在進行中ゲームの情報

- **レートリミット**:
  - 開発者キー: 20リクエスト/秒、100リクエスト/2分
  - バッチ処理でデータ収集する場合は制限を考慮した設計が必要

### Data Dragon

- チャンピオンアイコン、アイテム画像、スキルアイコンなどを取得
- パッチごとにデータを更新
- CDN経由でアセットを取得: `http://ddragon.leagueoflegends.com/cdn/<バージョン>/img/...`

## 3. 技術スタック詳細

### フロントエンド

- **フレームワーク**: React + Next.js
  - SSRによる高速表示とSEO対策
  - TypeScriptで型安全性確保

- **UI/UXデザイン**:
  - Styled-Componentsでスタイリング
  - レスポンシブデザイン対応
  - データ可視化にD3.js/Chart.js

- **状態管理**:
  - Redux/Redux Toolkitでグローバル状態管理
  - React Queryでサーバー状態管理

### バックエンド

- **API実装**: Node.js + Express/NestJS
  - RESTful APIの提供
  - GraphQLの検討 (効率的なデータ取得)
  - WebSocketによるリアルタイム通知

- **データ処理**:
  - マイクロサービスアーキテクチャ
  - キューシステム (RabbitMQ) によるバッチ処理

- **AI/データ分析**:
  - Python専用サービスで実装
  - Node.jsからの呼び出し

### データベース

- **SQL**: MySQL/Aurora
  - ユーザー情報、マッチ基本情報など構造化データ
  - 関連テーブル間の結合クエリに最適

- **NoSQL**: MongoDB
  - 試合の詳細データ (JSON形式)
  - 大量のマッチデータを柔軟なスキーマで格納

- **キャッシュ**: Redis
  - 頻繁に参照されるデータのキャッシュ
  - セッション管理、実時間通知

### インフラ

- **クラウド**: AWS/GCP
  - コンテナオーケストレーション (ECS/Kubernetes)
  - マネージドデータベース (RDS/Aurora, DynamoDB)
  - オブジェクトストレージ (S3)

- **CI/CD**:
  - GitHub Actions
  - Docker による環境一貫性

- **モニタリング**:
  - Prometheusによるメトリクス収集
  - Grafanaによる可視化

## 4. 追加機能の詳細設計

### 高度なデータ分析

- **シーズン分析**:
  - パッチごとのメタ変化トラッキング
  - チャンピオン勝率の時系列推移可視化

- **プレイヤー分析**:
  - プレイスタイル傾向の特定（序盤/終盤型、ファーミング/キル参加重視など）
  - ポジションごとの得意度マップ

### AIによるリプレイ解析

- **マッチデータ処理**:
  - タイムラインデータからイベント抽出
  - プレイヤー行動パターン認識

- **フィードバック生成**:
  - 集団戦での立ち位置評価
  - ファーム効率分析
  - ビジョンコントロール評価

### プレイヤーの成長分析

- **長期統計指標**:
  - シーズン間の成績比較
  - KDA、CS/分などの指標推移

- **成長スコア**:
  - カスタム指標による成長度合いの定量化
  - 同ランク帯との相対評価

### 対戦予測

- **予測モデル**:
  - チャンピオン構成の相性分析
  - プレイヤーの直近パフォーマンス考慮
  - チームシナジー評価（CC量、ダメージ分布など）

- **表示方法**:
  - 勝率予測の可視化
  - 主要な勝因/敗因の要素提示

## 5. 法的・規約面の考慮事項

### Riot Games API利用規約遵守

- 商用利用は製品登録・承認が必要
- ギャンブルや賭博要素の禁止
- プレイヤーへの基本無料提供（プレミアム機能可）
- レートリミットの遵守
- HTTPS通信の実施
- フッターにデータ提供元（Riot Games）表記

### データ利用制限

- 取得データの再配布禁止
- カスタムマッチデータは本人のみに表示
- ゲームプレイ中の不公平な情報提供禁止

### サイト運営上の注意点

- プライバシーポリシー・利用規約の整備
- 個人情報保護法・GDPRへの対応
- Riot Gamesの知的財産権尊重
- 非公式サイトである旨の明示

## 6. 開発ロードマップ

### フェーズ1: 基盤構築

- プロジェクト設定とリポジトリ作成
- フロントエンド・バックエンドの基本構造実装
- Riot API連携の基本機能実装（サモナー検索、マッチ履歴）

### フェーズ2: 基本機能実装

- チャンピオン統計・メタ分析機能
- ユーザープロフィール・戦績表示
- ランキング機能

### フェーズ3: 拡張機能実装

- AIリプレイ解析
- 成長分析ダッシュボード
- 対戦予測システム

### フェーズ4: 最適化とスケーリング

- パフォーマンス最適化
- インフラ拡張
- ユーザーフィードバックに基づく改善
